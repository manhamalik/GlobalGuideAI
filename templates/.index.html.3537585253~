<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Convergence" />
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Josefin+Sans" />
    <title>GlobalGuideAI</title>
    <style>
      body {
            /* background-color: #213c4b; */
          background-image: url('https://static.videezy.com/system/resources/thumbnails/000/043/897/original/200206_01_Particle-star-fall-seamless-loop.jpg');
        
/* https://images.unsplash.com/photo-1620646233562-f2a31ad24425?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8c3RhcnMlMjBibGFja3xlbnwwfHwwfHx8MA%3D%3D&w=1000&q=80 */
        }
      body, html {
          height: 100%;
          margin: 0;
          padding: 0;
        }
      
        .container {
            width: 55vw;
            margin: 0 auto;
            padding: 20px;
            border-radius: 20px;
            border: 1px solid #ccc; 
            box-sizing: border-box;
            overflow: auto;
            height: 100vh;
            background-color: #FFFF;
            position: relative;
        }

        .chatbot-message {
            background-color: #F0F0F0;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 20px;
            display: inline-block; 
        }

        .user-message {
            background-color: #E8F7FF;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 20px;
            text-align: right;
            width: fit-content;
            margin-left: auto;
        }
      
        .submit-container {
          border-top: 1px solid #ccc;
          width: calc(55vw - 60px);
          padding: 10px;
          align-items: center;
          justify-content: center;
          position: absolute;
          bottom: 0;
          left: 50%;
          transform: translateX(-50%); 
        }
        
      #user-message-input {
        width: calc(100% - 100px);
        padding: 5px;
        border-radius: 5px;
        border: 1px solid #ccc;
    }

      .top-container {
        background-color: #020204;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin-bottom: 20px;
      }
      
      .top-container img {
        display: block;
        max-width: 100%;
        margin-bottom: 20px;
        }
      
      .top-container .text-container {
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: flex-start;
          padding: 10px;
          color: #FFF;
          max-width: 50%;
          margin-right: 50px;
          text-align: center;
          color: #FFF;

      }

      .top-container h1 {
          font-size: 24px;
          margin-bottom: 10px;
        font-family: Josefin Sans;
      }

      .top-container h2 {
          font-size: 18px;
        font-family: Josefin Sans;
      }
    </style>
</head>
  
<body>
   <!-- <img src="global.gif" alt="Globe Gif"> -->
  <!-- <img src="images/global.gif" alt="GIF image" style="width: 100%; position: absolute; top: 0;"> -->
  <div class="top-container">
    <div class="text-container">
          <center> <h1>Hello, Welcome to GlobalGuideAI!</h1>
          <center> <h2>Your one stop shop for travelling around the world</h2>
        </div>
  <img src="https://cdn.pixabay.com/animation/2022/12/24/01/36/01-36-27-376_512.gif">
  </div>
  
    <div class="container">
        <center><h1>Welcome to the GlobalGuideAI</h1></center>
        <div id="chatbox">
            {% for message in chat_history %}
                <div class="{{ message[0] }}-message">{{ message[1] }}</div>
            {% endfor %}
        </div>
    <center> <div class="submit-container">
    <form id="message-form" action="/send-message" method="POST">
        <input type="text" id="user-message-input" name="user_message" placeholder="Enter your message">
        <button type="submit">
            <img src="images/submit.png" alt="Submit">
        </button>
    </form>
</div>

  <script>
const chatbox = document.getElementById("chatbox");
const messageForm = document.getElementById("message-form");
const userMessageInput = document.getElementById("user-message-input");

messageForm.addEventListener("submit", (e) => {
    e.preventDefault();
    const userMessage = userMessageInput.value;
    appendUserMessage(userMessage);
    userMessageInput.value = "";
    sendMessageToChatbot(userMessage);
});

function appendUserMessage(message) {
    const userMessageElement = document.createElement("div");
    userMessageElement.className = "user-message";
    userMessageElement.textContent = message;
    chatbox.appendChild(userMessageElement);
}

function appendChatbotMessage(message) {
    const chatbotMessageElement = document.createElement("div");
    chatbotMessageElement.className = "chatbot-message";
    chatbotMessageElement.innerHTML = message;
    chatbox.appendChild(chatbotMessageElement);
}

function sendMessageToChatbot(message) {
    const xhr = new XMLHttpRequest();
    xhr.open("POST", "/send-message");
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    xhr.onload = function () {
        if (xhr.status === 200) {
            const response = JSON.parse(xhr.responseText);
            appendChatbotMessage(response.reply);
        }
    };
    const data = new URLSearchParams();
    data.append("user_message", message);
    xhr.send(data);
}   
  </script>
</body>
</html>
